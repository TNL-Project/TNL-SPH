#!/bin/bash

resolution=$1

#Generate geometry with DualSPHysics gencase
cd template
cp damBreak3D_WCSPH-DBC_Def_template.xml damBreak3D_WCSPH-DBC_Def.xml
sed -i "s/resolutionPlaceholder/${resolution}/" damBreak3D_WCSPH-DBC_Def.xml
./generateGeoWithGenCase.sh
cd ..

#Get other necessary geometrical parameteres (grid size, smoothing lentgs) from geometry files
#and set TNL::SPH config files.
python3 generateCaseWithDSPHGenCase.py -resolution=$resolution

#Remove all the crap generated by DualSPHysics GenCase.
rm -r template/damBreak3D_WCSPH-DBC_out
